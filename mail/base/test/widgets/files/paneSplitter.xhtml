<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>Test for the pane-splitter custom element</title>
  <style>
    hr[is="pane-splitter"] {
      margin: 0 -3px;
      border: none;
      z-index: 1;
      cursor: ew-resize;
      opacity: .4;
      background-color: red;
    }

    #splitter3,
    #splitter4 {
      margin: -3px 0;
      cursor: ns-resize;
    }

    #horizontal-before {
      display: grid;
      grid-template-columns: minmax(auto, var(--splitter1-width)) 0 auto;
      width: 500px;
      height: 100px;
      --splitter1-width: 200px;
      margin: 1em;
    }

    #horizontal-after {
      display: grid;
      grid-template-columns: auto 0 minmax(auto, var(--splitter2-width));
      width: 500px;
      height: 100px;
      --splitter2-width: 200px;
      margin: 1em;
    }

    #vertical-before {
      display: inline-grid;
      grid-template-rows: minmax(auto, var(--splitter3-height)) 0 auto;
      width: 100px;
      height: 500px;
      --splitter3-height: 200px;
      margin: 1em;
    }

    #vertical-after {
      display: inline-grid;
      grid-template-rows: auto 0 minmax(auto, var(--splitter4-height));
      width: 100px;
      height: 500px;
      --splitter4-height: 200px;
      margin: 1em;
    }

    .resized,
    .fill2 {
      background-color: lightblue;
    }

    .fill {
      background-color: lightslategrey;
    }

    #window-resize-splitter-vertical {
      display: grid;
      --splitter6-height: 400px;
      grid-template-rows: auto min-content minmax(auto, var(--splitter6-height));
      height: 80vh;
      width: 100px;
      margin: 1em;
      position: absolute;
      top: 0;
      right: 0;
    }

    #window-resize-splitter {
      display: grid;
      --splitter5-width: 400px;
      grid-template-columns: auto min-content minmax(auto, var(--splitter5-width));
      width: 100vw;
      height: 100px;
      margin: 1em;
    }
  </style>
  <!-- This path is used for the automated test. -->
  <script src="chrome://messenger/content/pane-splitter.js"></script>
  <!-- This path is used when this file is loaded in a browser. -->
  <script src="../../../content/widgets/pane-splitter.js"></script>
  <script>
    function moveMarker(event) {
      let markerX = document.getElementById("markerX");
      markerX.style.left = `${event.clientX + window.scrollX}px`;
      markerX.textContent = `${event.type} event here`;

      let markerY = document.getElementById("markerY");
      markerY.style.top = `${event.clientY + window.scrollY}px`;
      markerY.textContent = `${event.type} event here`;
    }

    document.addEventListener("mousedown", moveMarker);
    document.addEventListener("mousemove", moveMarker);
    document.addEventListener("mouseup", moveMarker);

    window.addEventListener("load", () => {
      for (let splitter of document.querySelectorAll('hr[is="pane-splitter"]')) {
        const element = splitter.parentNode.querySelector(".resized")
        if (element) {
          splitter.resizeElement = element;
        }
      }
    });
  </script>
</head>
<body>
  <div id="horizontal-before">
    <div id="splitter1-before" class="resized"></div>
    <hr is="pane-splitter" id="splitter1" resize-direction="horizontal" />
    <div id="splitter1-after" class="fill"></div>
  </div>

  <div id="horizontal-after">
    <div id="splitter2-before" class="fill"></div>
    <hr is="pane-splitter" id="splitter2" resize="next" resize-direction="horizontal" />
    <div id="splitter2-after" class="resized"></div>
  </div>

  <div style="display: flex;">
    <div id="vertical-before">
      <div id="splitter3-before" class="resized"></div>
      <hr is="pane-splitter" id="splitter3" />
      <div id="splitter3-after" class="fill"></div>
    </div>

    <div id="vertical-after">
      <div id="splitter4-before" class="fill"></div>
      <hr is="pane-splitter" id="splitter4" resize="next" />
      <div id="splitter4-after" class="resized"></div>
    </div>
  </div>

  <div id="window-resize-splitter">
    <div id="resizeSplitter-before" class="fill"></div>
    <hr
      is="pane-splitter"
      id="splitter5"
      resize-id="resizeSplitter-after"
      resize-direction="horizontal"
      resize-lock-ids="resizeSplitter-before"
      resize-with-window="true"/>
    <div id="resizeSplitter-after" class="fill2"></div>
  </div>

  <div id="window-resize-splitter-vertical">
    <div id="resizeSplitter-vertical-before" class="fill"></div>
    <hr
      is="pane-splitter"
      id="splitter6"
      resize-id="resizeSplitter-vertical-after"
      resize-direction="vertical"
      resize-lock-ids="resizeSplitter-vertical-before"
      resize-with-window="true"/>
    <div id="resizeSplitter-vertical-after" class="fill2"></div>
  </div>

  <div id="markerX" style="position: absolute; top: 0px; border-left: 1px red solid;"></div>
  <div id="markerY" style="position: absolute; left: 550px; border-top: 1px red solid;"></div>
</body>
</html>
